<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- V3.4: é˜²æ­¢æœå°‹å¼•æ“ç´¢å¼•æ­¤é é¢ -->
    <meta name="robots" content="noindex, nofollow">
    <title>Asiapac 1ã€2æœˆå£½æ˜Ÿæ…¶ç”Ÿæœƒ</title>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Google Fonts (æ–°å¢ Patrick Hand å­—é«”) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Pacifico&family=Patrick+Hand&display=swap" rel="stylesheet">
    <!-- å¼•å…¥ Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- å¼•å…¥ Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            /* V3.0: å†¬æ—¥å†°é›ªæ¼¸å±¤ */
            background: linear-gradient(120deg, #e0c3fc 0%, #8ec5fc 100%);
            overflow-x: hidden;
            color: #2d3748;

            /* ========================================= */
            /* V3.6 Security: ç¦æ­¢é¸å–æ–‡å­— (CSSéƒ¨åˆ†)      */
            /* ========================================= */
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none;    /* Firefox */
            -ms-user-select: none;     /* IE 10+ */
            user-select: none;         /* Standard syntax */
        }

        /* æ¨™é¡Œç”¨çš„è¯éº—è‰å¯« */
        .font-handwriting {
            font-family: 'Pacifico', cursive;
        }

        /* V3.5 å„ªåŒ–ï¼šæç¤ºæ–‡å­—ç”¨çš„æ¸…æ™°æ‰‹å¯«å­—é«” */
        .font-clue {
            font-family: 'Patrick Hand', cursive;
        }

        /* ç¿»è½‰å¡ç‰‡çš„æ ¸å¿ƒ CSS */
        .perspective-1000 {
            perspective: 1000px;
        }
        
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .flip-card-inner.flipped {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 1rem;
            box-shadow: 0 10px 25px -5px rgba(31, 38, 135, 0.37);
            overflow: hidden;
        }

        .flip-card-front {
            background-color: rgba(255, 255, 255, 0.95);
            color: black;
            border: 4px solid #fff;
        }

        .flip-card-back {
            background: linear-gradient(to top, #accbee 0%, #e7f0fd 100%);
            color: #333;
            transform: rotateY(180deg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 4px solid #a1c4fd;
        }

        /* èƒŒæ™¯æ¼‚æµ®è£é£¾ */
        .floating-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        .floating-item {
            position: absolute;
            color: rgba(255, 255, 255, 0.6);
            animation: floatDown 15s linear infinite;
        }
        @keyframes floatDown {
            0% { transform: translateY(-10vh) rotate(0deg) translateX(0); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translateY(110vh) rotate(360deg) translateX(20px); opacity: 0; }
        }

        /* æœ¨é ­è³ªæ„Ÿæ›ç‰Œæ¨£å¼ */
        .wood-tag {
            background-color: #e6c9a8;
            background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.3) 0px, transparent 1px, transparent 10px);
            border: 2px solid #d4a77a;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
        }

        /* V3.5: éŒ¯èª¤æç¤ºçš„æ–æ™ƒå‹•ç•« */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .shake-animation {
            animation: shake 0.3s ease-in-out;
        }
    </style>
</head>
<body class="min-h-screen py-10 px-4">

    <!-- èƒŒæ™¯æ¼‚æµ®è£é£¾ -->
    <div class="floating-bg">
        <i class="fas fa-snowflake text-4xl floating-item" style="left: 10%; animation-duration: 12s; animation-delay: 0s;"></i>
        <i class="fas fa-snowflake text-2xl floating-item" style="left: 25%; animation-duration: 18s; animation-delay: 5s;"></i>
        <i class="fas fa-star text-3xl floating-item" style="left: 40%; animation-duration: 15s; animation-delay: 2s;"></i>
        <i class="fas fa-snowflake text-5xl floating-item" style="left: 60%; animation-duration: 20s; animation-delay: 7s;"></i>
        <i class="fas fa-snowflake text-3xl floating-item" style="left: 80%; animation-duration: 14s; animation-delay: 1s;"></i>
        <i class="fas fa-star text-2xl floating-item" style="left: 90%; animation-duration: 22s; animation-delay: 10s;"></i>
    </div>

    <!-- æ¨™é¡Œå€ -->
    <header class="text-center mb-16 relative z-10">
        <div class="inline-block bg-white/60 backdrop-blur-md px-10 py-8 rounded-3xl shadow-lg border border-white/80">
            <h1 class="text-4xl md:text-6xl font-bold text-gray-800 mb-10 drop-shadow-sm font-handwriting text-blue-500">
                Happy Birthday!
            </h1>
            <h2 class="text-xl md:text-2xl font-bold text-slate-600">
                <span class="text-sky-500"><i class="fas fa-search"></i></span> 
                çŒœçŒœé€™æ¬¡å£½æ˜Ÿæ˜¯èª°ï¼Ÿ 
                <span class="text-purple-400"><i class="fas fa-smile-wink"></i></span>
            </h2>
        </div>
        <p class="text-white font-bold text-lg mt-4 drop-shadow-md tracking-wider">â„ï¸ åœ¨å¯’å†·çš„å­£ç¯€ï¼Œé€ä¸Šæœ€æº«æš–çš„ç¥ç¦ â„ï¸</p>
    </header>

    <!-- éŠæˆ²å¡ç‰‡å®¹å™¨ -->
    <div id="game-container" class="relative z-10 max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 pb-20">
        <!-- å¡ç‰‡å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
    </div>

    <!-- åº•éƒ¨æ§åˆ¶å€ -->
    <div class="fixed bottom-0 left-0 w-full bg-white/80 backdrop-blur-md p-4 shadow-[0_-5px_15px_rgba(0,0,0,0.1)] z-50 flex justify-center items-center gap-4 border-t border-white/50">
        <button onclick="resetAllCards()" class="bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold py-2 px-6 rounded-full transition duration-300 border border-slate-300">
            <i class="fas fa-redo-alt mr-2"></i> å†æ¬¡æŒ‘æˆ°ï¼Ÿ
        </button>
        <button onclick="celebrateNow()" class="bg-gradient-to-r from-sky-400 to-indigo-500 hover:from-sky-500 hover:to-indigo-600 text-white font-bold py-2 px-6 rounded-full shadow-lg transform hover:scale-105 transition duration-300 ring-2 ring-offset-2 ring-sky-200">
            <i class="fas fa-glass-cheers mr-2"></i> ä¸€èµ·æ…¶ç¥ï¼
        </button>
    </div>

    <!-- V3.5: çŒœè¬äº’å‹•è¦–çª— (Modal) -->
    <div id="guess-modal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] hidden flex justify-center items-center px-4">
        <div class="bg-white rounded-2xl p-6 md:p-8 max-w-sm w-full shadow-2xl border-4 border-sky-200 relative transform transition-all scale-100">
            <!-- è£é£¾ -->
            <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 bg-sky-500 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg border-2 border-white text-xl">
                <i class="fas fa-question"></i>
            </div>
            
            <h3 class="text-2xl font-bold text-slate-700 mt-4 mb-2 text-center">ä½ çŸ¥é“æˆ‘æ˜¯èª°å—ï¼Ÿ</h3>
            <p class="text-slate-500 text-sm text-center mb-6">è«‹è¼¸å…¥è‹±æ–‡åå­—çŒœçŒœçœ‹ï¼</p>
            
            <div class="mb-6 relative">
                <input type="text" id="guess-input" placeholder="Ex: John" 
                       class="w-full border-2 border-slate-300 rounded-xl py-3 px-4 text-center text-xl font-bold text-slate-700 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all placeholder-slate-300"
                       autocomplete="off">
                <p id="error-msg" class="text-red-500 text-sm font-bold text-center mt-2 hidden animate-pulse">
                    <i class="fas fa-times-circle mr-1"></i> çŒœéŒ¯å›‰ï¼å†è©¦è©¦çœ‹ï¼Ÿ
                </p>
            </div>
            
            <div class="flex gap-3 justify-center">
                <button onclick="giveUp()" class="flex-1 bg-slate-200 hover:bg-slate-300 text-slate-600 font-bold py-3 px-4 rounded-xl transition duration-200 text-sm">
                    å¿ç—›æ”¾æ£„
                </button>
                <button onclick="checkAnswer()" class="flex-1 bg-gradient-to-r from-sky-400 to-indigo-500 hover:from-sky-500 hover:to-indigo-600 text-white font-bold py-3 px-4 rounded-xl shadow-md transition duration-200 transform active:scale-95 text-sm">
                    <i class="fas fa-check mr-1"></i> ç¢ºå®š
                </button>
            </div>

            <!-- é—œé–‰æŒ‰éˆ• -->
            <button onclick="closeModal()" class="absolute top-4 right-4 text-slate-300 hover:text-slate-500 transition">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
    </div>

    <script>
        // ==========================================
        // è³‡æ–™è¨­å®šå€
        // ==========================================
        const birthdayStars = [
            {
                id: 1,
                clueImage: "./images/whoami01.png", 
                clueText: "æç¤ºï¼š\nè’™å¨œniè",
                realImage: "./images/who01.png",
                name: "Nick Lin",
                department: "AMæ•¸ä½å»£å‘Šéƒ¨é–€",
                message: "ç¥ä½ å‰µæ„ç„¡é™ï¼Œå¤©å¤©é–‹å¿ƒï¼âœ¨",
                constellation: "â™’", // æ°´ç“¶åº§
                birthDate: "02/05"
            },
            {
                id: 2,
                clueImage: "./images/whoami02.png",
                clueText: "æç¤ºï¼š\né€™æ˜¯èª°äº‚äº‚çš„æ¡Œé¢ï¼Ÿ",
                realImage: "./images/who02.jpg",
                name: "Ken Lee",
                department: "AMæ•¸ä½å»£å‘Šéƒ¨é–€",
                message: "Bug é€€æ•£ï¼Œæº–æ™‚ä¸‹ç­ï¼ğŸš€",
                constellation: "â™‘", // æ‘©ç¾¯åº§
                birthDate: "01/15"
            },
            {
                id: 3,
                clueImage: "./images/whoami03.png",
                clueText: "æç¤ºï¼š\nå¤©ä½¿çœ¼çœ¸ï¼Ÿé­”é¬¼èº«æï¼Ÿ",
                realImage: "./images/who03.jpg",
                name: "Amber Tsai",
                department: "BSå¸‚å ´ç‡Ÿé‹éƒ¨é–€",
                message: "è¬è¬å¦³ç¸½æ˜¯ç…§é¡§å¤§å®¶ï¼ğŸ‚",
                constellation: "â™‘", // æ‘©ç¾¯åº§
                birthDate: "01/14"
            },
            {
                id: 4,
                clueImage: "./images/whoami04.jpg",
                clueText: "æç¤ºï¼š\nèª°é¤Šäº†å…©éš»å°æ©˜è²“",
                realImage: "./images/who04.jpg",
                name: "Kavass Chang",
                department: "SMç¤¾ç¾¤åª’é«”éƒ¨é–€",
                message: "æ¥­ç¸¾é•·ç´…ï¼Œè¨‚å–®æ¥ä¸å®Œï¼ğŸ’°",
                constellation: "â™’", // æ°´ç“¶åº§
                birthDate: "01/22"
            },
            {
                id: 5,
                clueImage: "./images/whoami05.png",
                clueText: "æç¤ºï¼š\né›–ç„¶ä¸åœ¨ä»™å¢ƒå·¥ä½œ<br>ä½†åå­—è‡ªå¸¶å¥‡å¹»é­”æ³•",
                realImage: "./images/who05.jpg",
                name: "Alice Shih",
                department: "HRäººåŠ›è³‡æºéƒ¨é–€",
                message: "é¡˜å¦³çš„ç”Ÿæ´»å¦‚è¨­è¨ˆèˆ¬ç²¾å½©ï¼ğŸ¨",
                constellation: "â™‘", // æ‘©ç¾¯åº§
                birthDate: "01/15"
            },
            {
                id: 6,
                clueImage: "./images/whoami06.jpg",
                clueText: "æç¤ºï¼š\næ˜¯èª°å°æ™‚å€™ç¶é›™é¦¬å°¾å°±é€™éº¼ç„¡æ•µï¼",
                realImage: "./images/who06.jpg",
                name: "Harper Huang",
                department: "SMå°ä¸­ç¤¾ç¾¤åª’é«”éƒ¨é–€",
                message: "å¤©å¤©é›ç‹—ï¼Œå¤©å¤©é–‹å¿ƒï¼ğŸ¶",
                constellation: "â™‘",
                birthDate: "01/17"
            },
            {
                id: 7,
                clueImage: "./images/whoami07.png",
                clueText: "æç¤ºï¼š\nèˆ‡ç†Šå¤§ã€å…”å…”å½¢å½±ä¸é›¢",
                realImage: "./images/who07.jpg",
                name: "Sally Seo",
                department: "HRäººåŠ›è³‡æºéƒ¨é–€",
                message: "ç¥å¦³è²¡æºæ»¾æ»¾ä¾†ï¼â˜•",
                constellation: "â™“",
                birthDate: "02/21"
            },
            {
                id: 8,
                clueImage: "./images/whoami08.png",
                clueText: "æç¤ºï¼š\nç„¡æ„é–“ç™¼ç¾Dcardä¸Šçš„ç…§ç‰‡å±…ç„¶æ˜¯æˆ‘åŒäº‹ï¼",
                realImage: "https://images.unsplash.com/photo-1501196354995-cbb51c65aaea?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
                name: "Mollie Chen",
                department: "SMå°ä¸­ç¤¾ç¾¤åª’é«”éƒ¨é–€",
                message: "æ°¸é ä¿æŒå†’éšªçš„ç²¾ç¥ï¼â›°ï¸",
                constellation: "â™‘",
                birthDate: "01/11"
            },
            {
                id: 9,
                clueImage: "https://images.unsplash.com/photo-1581009146145-b5ef050c2e1e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
                clueText: "æç¤ºï¼š\nå¥èº«æˆ¿æ˜¯ç¬¬äºŒå€‹å®¶",
                realImage: "./images/who09.jpg",
                name: "Tris Chu",
                department: "AMå°ä¸­æ•¸ä½å»£å‘Šéƒ¨é–€",
                message: "å¥åº·ç¾éº—ï¼Œæ´»åŠ›æ»¿æ»¿ï¼ğŸ’ª",
                constellation: "â™’",
                birthDate: "02/16"
            },
            {
                id: 10,
                clueImage: "https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
                clueText: "æç¤ºï¼š\nè¾¦å…¬å®¤çš„æ–æ»¾å·¨æ˜Ÿ",
                realImage: "./images/who10.jpeg",
                name: "Akane Lin",
                department: "SMç¤¾ç¾¤åª’é«”éƒ¨é–€",
                message: "Rock n' Roll Forever! ğŸ¸",
                constellation: "â™‘",
                birthDate: "01/18"
            },
            {
                id: 11,
                clueImage: "https://images.unsplash.com/photo-1493711662062-fa541adb3fc8?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80",
                clueText: "æç¤ºï¼š\né€™æ˜¯èª°çš„éŠæˆ²æ‰‹æŠŠï¼Ÿ",
                realImage: "./images/who11.png",
                name: "Scott Chang",
                department: "BSå°ä¸­å¸‚å ´ç‡Ÿé‹éƒ¨é–€",
                message: "ç­‰ç´šç„¡é™å‡ï¼Œè£å‚™å…¨ç¥è£ï¼ğŸ®",
                constellation: "â™’",
                birthDate: "02/06"
            }
        ];

        // ==========================================
        // ç¨‹å¼é‚è¼¯å€
        // ==========================================
        const container = document.getElementById('game-container');
        const modal = document.getElementById('guess-modal');
        const guessInput = document.getElementById('guess-input');
        const errorMsg = document.getElementById('error-msg');
        
        // ç”¨æ–¼è¨˜éŒ„ç•¶å‰æ­£åœ¨äº’å‹•çš„å¡ç‰‡
        let currentCardElement = null;
        let currentCorrectAnswer = "";

        // æ–°å¢ï¼šéŒ¯èª¤è¨Šæ¯è¨­å®šå€ (å¯åœ¨æ­¤ä¿®æ”¹ 3 ç¨®è¼ªæ’­è¨Šæ¯)
        const errorMessages = [
            "ç…§è‘—æç¤ºæƒ³çœ‹çœ‹ï¼ŒåŠ æ²¹ï¼",
            "æ¯ä¸Ÿå“¦ï¼å†è©¦è©¦çœ‹ï¼Ÿ",
            "ä½ æ˜¯ä¸æ˜¯è·ŸåŒäº‹å¾ˆä¸ç†Ÿï¼Ÿ"
        ];
        // è¨˜éŒ„ç›®å‰é¡¯ç¤ºåˆ°ç¬¬å¹¾å‰‡éŒ¯èª¤è¨Šæ¯
        let errorMsgIndex = 0;

        function renderCards() {
            container.innerHTML = '';
            birthdayStars.forEach(star => {
                const cardWrapper = document.createElement('div');
                cardWrapper.className = 'bg-transparent h-96 w-full perspective-1000 group';

                const cardInner = document.createElement('div');
                cardInner.className = 'flip-card-inner relative w-full h-full shadow-xl rounded-xl transition-all duration-500';
                
                // V3.5: å°‡æ­£ç¢ºç­”æ¡ˆ (Name) ç¶å®šåœ¨ data-answer å±¬æ€§ä¸Šï¼Œæ–¹ä¾¿æ¯”å°
                cardInner.setAttribute('data-answer', star.name);
                
                // V3.5: ç¶å®šé»æ“Šäº‹ä»¶
                cardInner.onclick = function() { handleCardClick(this); };

                const cardFront = document.createElement('div');
                cardFront.className = 'flip-card-front flex flex-col items-center bg-white';
                cardFront.innerHTML = `
                    <div class="h-3/4 w-full p-3 pb-0">
                        <div class="w-full h-full overflow-hidden rounded-t-lg bg-slate-50 relative border border-slate-100">
                            <img src="${star.clueImage}" alt="Clue" class="w-full h-full object-cover transition duration-300 group-hover:scale-110 group-hover:rotate-1">
                            <div class="absolute top-2 right-2 bg-sky-400 text-white text-xs font-bold px-2 py-1 rounded-full shadow-md">
                                <i class="fas fa-search"></i> Clue
                            </div>
                        </div>
                    </div>
                    <div class="h-1/4 w-full flex flex-col justify-center items-center p-2 bg-white">
                        <p class="font-bold text-slate-600 text-lg text-center whitespace-pre-line font-clue transform -rotate-2">${star.clueText}</p>
                    </div>
                `;

                const cardBack = document.createElement('div');
                cardBack.className = 'flip-card-back p-4 relative'; 
                cardBack.innerHTML = `
                    <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-sky-300 via-blue-400 to-indigo-400"></div>
                    
                    <div class="wood-tag absolute top-3.5 right-3 px-3 py-1 rounded-md transform rotate-3 flex items-center gap-1 z-10">
                        <span class="text-xl leading-none text-amber-800" title="æ˜Ÿåº§">${star.constellation || 'â˜…'}</span>
                        <span class="text-sm font-bold font-mono text-amber-900 tracking-tighter">${star.birthDate || '??/??'}</span>
                    </div>

                    <div class="w-28 h-28 rounded-full overflow-hidden border-4 border-white shadow-lg mb-3 ring-2 ring-sky-200 mt-2">
                        <img src="${star.realImage}" alt="${star.name}" class="w-full h-full object-cover">
                    </div>
                    <h2 class="text-2xl font-bold text-slate-800 mb-0">${star.name}</h2>
                    <span class="text-slate-500 text-sm mb-2">${star.department}</span>
                    
                    <div class="bg-white/70 p-3 rounded-lg w-full text-center shadow-sm backdrop-blur-sm">
                        <p class="text-slate-700 italic text-sm font-medium">"${star.message}"</p>
                    </div>
                    
                    <div class="mt-3 flex gap-2">
                        <span class="text-sky-500 text-lg animate-bounce"><i class="fas fa-snowflake"></i></span>
                        <span class="text-indigo-500 text-lg animate-bounce" style="animation-delay: 0.1s"><i class="fas fa-gift"></i></span>
                        <span class="text-purple-500 text-lg animate-bounce" style="animation-delay: 0.2s"><i class="fas fa-glass-cheers"></i></span>
                    </div>
                `;

                cardInner.appendChild(cardFront);
                cardInner.appendChild(cardBack);
                cardWrapper.appendChild(cardInner);
                container.appendChild(cardWrapper);
            });
        }

        // V3.5: è™•ç†å¡ç‰‡é»æ“Šé‚è¼¯
        function handleCardClick(element) {
            // å¦‚æœå·²ç¶“ç¿»é–‹äº†ï¼Œé»æ“Šå‰‡è“‹å›å» (ä¿æŒåŸæ¨£)
            if (element.classList.contains('flipped')) {
                element.classList.remove('flipped');
                return;
            }

            // å¦‚æœé‚„æ²’ç¿»é–‹ï¼Œè§¸ç™¼çŒœè¬å½ˆçª—
            currentCardElement = element;
            currentCorrectAnswer = element.getAttribute('data-answer'); // ç²å–æ­£ç¢ºç­”æ¡ˆ
            openGuessModal();
        }

        // é–‹å•Ÿå½ˆçª—
        function openGuessModal() {
            modal.classList.remove('hidden');
            guessInput.value = ''; // æ¸…ç©ºè¼¸å…¥æ¡†
            guessInput.focus();    // è‡ªå‹•èšç„¦
            errorMsg.classList.add('hidden'); // éš±è—éŒ¯èª¤è¨Šæ¯
        }

        // é—œé–‰å½ˆçª—
        function closeModal() {
            modal.classList.add('hidden');
            currentCardElement = null; // é‡ç½®
        }

        // æª¢æŸ¥ç­”æ¡ˆ
        function checkAnswer() {
            const userGuess = guessInput.value.trim().toLowerCase();
            const correctName = currentCorrectAnswer.toLowerCase();

            // é‚è¼¯ï¼šå¦‚æœè¼¸å…¥ä¸ç‚ºç©ºï¼Œä¸”æ­£ç¢ºç­”æ¡ˆåŒ…å«ä½¿ç”¨è€…è¼¸å…¥çš„å­—ä¸² (ä¾‹å¦‚è¼¸å…¥ John ä¹Ÿèƒ½å°æ‡‰ John Doe)
            if (userGuess && correctName.includes(userGuess)) {
                // ç­”å°äº†ï¼
                flipCurrentCard(); // å…ˆåŸ·è¡Œç¿»ç‰Œ
                closeModal();      // å†é—œé–‰è¦–çª— (æœƒæ¸…é™¤ currentCardElement)
                errorMsgIndex = 0; // (é¸ç”¨) ç­”å°å¾Œå¯é‡ç½®éŒ¯èª¤è¨Šæ¯é †åºï¼Œä¹Ÿå¯ä¸é‡ç½®
            } else {
                // ç­”éŒ¯äº†ï¼
                
                // æ›´æ–°éŒ¯èª¤è¨Šæ¯ï¼šå–å‡ºé™£åˆ—ä¸­å°æ‡‰çš„è¨Šæ¯ï¼Œä¸¦æ›´æ–° index
                const msg = errorMessages[errorMsgIndex % errorMessages.length];
                errorMsg.innerHTML = `<i class="fas fa-times-circle mr-1"></i> ${msg}`;
                errorMsgIndex++; // ä¸‹æ¬¡é¡¯ç¤ºä¸‹ä¸€å¥
                
                errorMsg.classList.remove('hidden');
                // æ–æ™ƒè¼¸å…¥æ¡†æç¤ºéŒ¯èª¤
                const inputContainer = document.querySelector('#guess-modal input');
                inputContainer.classList.add('shake-animation');
                setTimeout(() => inputContainer.classList.remove('shake-animation'), 300);
                guessInput.value = ''; 
                guessInput.focus();
            }
        }

        // æ”¾æ£„çŒœæ¸¬
        function giveUp() {
            flipCurrentCard(); // å…ˆåŸ·è¡Œç¿»ç‰Œ
            closeModal();      // å†é—œé–‰è¦–çª—
        }

        // åŸ·è¡Œç¿»ç‰Œå‹•ä½œ
        function flipCurrentCard() {
            if (currentCardElement) {
                currentCardElement.classList.add('flipped');
                // å˜—è©¦æ’­æ”¾ç‰¹æ•ˆï¼Œå¦‚æœå¤±æ•—ä¹Ÿä¸å½±éŸ¿ç¿»ç‰Œ
                try {
                    playConfetti(0.5); 
                } catch(e) {
                    console.log('Confetti failed but card flipped');
                }
                
                // ä¿®æ­£ï¼šé€™è£¡ä¸è¦æŠŠ currentCardElement è¨­ç‚º null
                // è®“ closeModal ä¾†è² è²¬æ¸…ç†ï¼Œç¢ºä¿åœ¨åŒä¸€å€‹åŸ·è¡Œé€±æœŸå…§ element é‚„åœ¨
            }
        }

        // æ”¯æ´æŒ‰ Enter éµé€å‡ºç­”æ¡ˆ
        guessInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        // é‡ç½®æ‰€æœ‰å¡ç‰‡
        function resetAllCards() {
            const cards = document.querySelectorAll('.flip-card-inner');
            cards.forEach(card => card.classList.remove('flipped'));
        }

        function celebrateNow() {
            var duration = 2000;
            var end = Date.now() + duration;

            (function frame() {
                confetti({
                    particleCount: 3,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#a1c4fd', '#c2e9fb', '#ffffff', '#e0c3fc']
                });
                confetti({
                    particleCount: 3,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#a1c4fd', '#c2e9fb', '#ffffff', '#e0c3fc']
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }

        function playConfetti(seconds) {
             confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#a1c4fd', '#c2e9fb', '#ffffff']
            });
        }

        // =========================================
        // V3.6 Security: ç¦æ­¢å³éµé¸å–® (JSéƒ¨åˆ†)
        // =========================================
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });

        renderCards();

        window.addEventListener('load', () => {
            setTimeout(() => {
               playConfetti(1);
            }, 500);
        });

    </script>
</body>
</html>